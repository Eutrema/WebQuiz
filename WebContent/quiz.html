<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="dwr/engine.js"></script>
<script type="text/javascript" src="dwr/util.js"></script>
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="js/jquery.serialize.js"></script>
<script type="text/javascript" src="dwr/interface/QuizGetter.js"></script>
<script type="text/javascript">
	var guestID = 0;
	if (window.location.search) {
        guestID = unescape(window.location.search.substring(1, window.location.search.length));
	}
	var deadline = 0;
	var quizID = 0;
	function getCurrentQuiz() {
		QuizGetter.getCurrentQuiz(guestID,
		{
			callback : function(data) {
				$('#quizString').html(data[0]);
				deadline = parseInt( data[1] / 1000 );
				$('#remainingTime').text(deadline - parseInt( new Date() / 1000 ));
				setInterval(refreshTime, 1000);
			}
		});
	}
	function refreshTime() {
		var remain = deadline - parseInt( new Date() / 1000 );
		$('#remainingTime').text(remain);
		if (remain <= 0) {
			window.location.replace("answer.html?" + escape(guestID));
		}

	}
	function changeAnswer(answer) {
		QuizGetter.changeGuestAnswer({guestID, answer});
	}
</script>
</head>
<body>
	<div id="quizArea">
	<font size="+3">問題</font><br>
	<span id="quizString"></span><br>
	残り時間：<span id="remainingTime"></span>秒<br>
	</div>
	<br>
	<input type="image" src="img/maru.png" id="maru"  onclick="changeAnswer(1);$('#maru').attr('disabled', true);$('#batu').attr('disabled', false);$('#maru').attr('src', 'img/cmaru.png');$('#batu').attr('src', 'img/batu.png');" />
	<input type="image" src="img/batu.png" id="batu" onclick="changeAnswer(2);$('#batu').attr('disabled', true);$('#maru').attr('disabled', false);$('#batu').attr('src', 'img/cbatu.png');$('#maru').attr('src', 'img/maru.png');" />

</body>

<script type="text/javascript">
	getCurrentQuiz();
</script>
</html>